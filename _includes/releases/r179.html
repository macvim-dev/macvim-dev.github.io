<p>Updated to Vim 9.1.0</p>

<nav>
<ul class="toc" id="markdown-toc">
  <li><a href="#r179-features" id="markdown-toc-r179-features">Features</a>    <ul>
      <li><a href="#r179-system-monospace-font-sf-mono" id="markdown-toc-r179-system-monospace-font-sf-mono">System monospace font (SF Mono)</a></li>
      <li><a href="#r179-new-vim-features" id="markdown-toc-r179-new-vim-features">New Vim features</a></li>
      <li><a href="#r179-misc" id="markdown-toc-r179-misc">Misc</a></li>
    </ul>
  </li>
  <li><a href="#r179-general" id="markdown-toc-r179-general">General</a></li>
  <li><a href="#r179-fixes" id="markdown-toc-r179-fixes">Fixes</a></li>
  <li><a href="#r179-compatibility" id="markdown-toc-r179-compatibility">Compatibility</a></li>
</ul>

</nav>

<p>Happy New Year! See <a href="https://github.com/macvim-dev/macvim/discussions/1472">#1472</a> for a retrospective of 2023 and future roadmap.</p>

<p>Also, Vim 9.1 is now released! See <a href="https://www.vim.org/vim-9.1-released.php">announcement</a>.</p>

<h1 id="r179-features">Features</h1>

<h2 id="r179-system-monospace-font-sf-mono">System monospace font (SF Mono)</h2>

<p>MacVim’s <code>guifont</code> option now supports a new <code>-monospace-</code> value, which instructs it to use the system monospace font, which is SF Mono in recent macOS versions. As mentioned below (New Vim features), you can now use tab-completion to see the available values in cmdline. See <a href="https://macvim.org/docs/redirect.html?tag=macvim-guifont"><code>:h macvim-guifont</code></a> for more details on how to use it (including using different font weights). <a href="https://github.com/macvim-dev/macvim/issues/1463">#1463</a></p>

<p>Note: I’m contemplating changing the MacVim default value for <code>guifont</code> to be <code>-monospace-</code> in the future so MacVim will always use the native monospace font instead of being hard-coded to Menlo. This makes it more consistent with Apple Terminal and Xcode. Feel free to leave a comment on <a href="https://github.com/macvim-dev/macvim/issues/1277">#1277</a> if you have opinions on this.</p>

<p><img width="310" height="85" alt="Menlo (default) vs SF Mono" src="https://github.com/macvim-dev/macvim/assets/1217449/56e4a7b7-9f9d-4cfa-9e6a-bb4baffc6d30" /></p>

<h2 id="r179-new-vim-features">New Vim features</h2>

<ul>
  <li>Command-line tab completion improvements and bug fixes (see <a href="https://macvim.org/docs/redirect.html?tag=cmdline-completion"><code>:h cmdline-completion</code></a> and <a href="https://macvim.org/docs/redirect.html?tag=complete-set-option"><code>:h complete-set-option</code></a>)
    <ul>
      <li>Most string option values can now be completed. <a href="https://github.com/vim/vim/commit/900894b09a95398dfc75599e9f0aa2ea25723384">v9.0.1958</a></li>
      <li>MacVim options (guifont, fuoptions) also support tab completion. <a href="https://github.com/macvim-dev/macvim/issues/1436">#1436</a></li>
      <li>++opt (e.g. <code>:e ++</code>) and <code>:terminal ++</code> completion work as well. <a href="https://github.com/vim/vim/commit/989426be6e9ae23d2413943890206cbe15d9df38">v9.0.2025</a></li>
      <li><img width="497" height="227" alt="listchars" src="https://github.com/macvim-dev/macvim/assets/1217449/27a17e85-30ed-43d9-b67b-d15ecf116042" /></li>
    </ul>
  </li>
  <li>New options:
    <ul>
      <li><code>set jumpoptions=stack</code>. Ported from Neovim. <a href="https://github.com/vim/vim/commit/87018255e3ad0f4dfa03e20318836d24af721caf">v9.0.1921</a></li>
    </ul>
  </li>
  <li>API changes
    <ul>
      <li><code>getmousepos()</code> returns a new “coladd” for tab characters. <a href="https://github.com/vim/vim/commit/f5a94d5165bb9e390797da50a1fa7a87df3fbee4">v9.0.2032</a></li>
    </ul>
  </li>
  <li><code>:Man</code> now works properly when <code>gdefault</code> is set. <a href="https://github.com/vim/vim/issues/13097">vim/vim#13097</a></li>
  <li>A new small Vim script library that may expand in the future. See <a href="https://macvim.org/docs/redirect.html?tag=vim-script-library"><code>:h vim-script-library</code></a>.</li>
  <li>Vim9 script improvements.</li>
  <li>Miscellaneous security fixes.</li>
</ul>

<h2 id="r179-misc">Misc</h2>

<p>New settings:</p>

<ul>
  <li>“Scroll in one direction only” (Input). Prevents accidental horizontal scrolling when scrolling vertically using a trackpad. <a href="https://github.com/macvim-dev/macvim/issues/1442">#1442</a></li>
</ul>

<p>Clean mode (<a href="https://github.com/macvim-dev/macvim/issues/1453">#1453</a>):</p>

<ul>
  <li>Vim can be opened in clean mode (does not use .vimrc or plugins) via the new menu item “New Clean Window”. The new menu isn’t localized in most languages. Please comment on the issue if you would like to help in localization.</li>
  <li>MacVim can be launched without loading user defaults for a clean experience via a command-line flag. See <a href="https://macvim.org/docs/redirect.html?tag=macvim-settings"><code>:h macvim-settings</code></a>.</li>
</ul>

<h1 id="r179-general">General</h1>

<ul>
  <li>Sparkle (updater for MacVim) is now updated to 2.5.2. The updater can now show multiple release notes when updating MacVim across multiple versions. <a href="https://github.com/macvim-dev/macvim/issues/1446">#1446</a> <a href="https://github.com/macvim-dev/macvim/issues/1469">#1469</a></li>
  <li>Binary release is now built with more optimized compiler settings. Vim will now run slightly faster than before. <a href="https://github.com/macvim-dev/macvim/issues/1444">#1444</a></li>
  <li>macOS 14 Sonoma:
    <ul>
      <li>Binary release is now built using the macOS 14 SDK (<a href="https://github.com/macvim-dev/macvim/issues/1434">#1434</a>, <a href="https://github.com/macvim-dev/macvim/issues/1440">#1440</a>, <a href="https://github.com/macvim-dev/macvim/issues/1448">#1448</a>). One small change is that very tall characters (e.g. “นี้”) on the first line will now draw into the title bar instead of being clipped.</li>
      <li>Fixed printing with <code>:hardcopy</code> under macOS 14. <em>NOTE:</em> Starting from macOS 14, you have to install <code>ps2pdf</code> (available from Ghostscript) yourself before you can print. See <a href="https://github.com/macvim-dev/macvim/issues/1464">#1464</a></li>
    </ul>
  </li>
  <li>Python 2 support: The default location for locating the Python 2 lib in the binary release is now under /Library/Frameworks rather than /usr/local. Note: Python 2 has long been obsolete. If you rely on Python 2 plugins, consider this a warning as it’s only supported as long as it’s feasible and could be removed in the future. <a href="https://github.com/macvim-dev/macvim/issues/1434">#1434</a></li>
</ul>

<h1 id="r179-fixes">Fixes</h1>

<ul>
  <li>Fixed non-native full screen mode when using a MacBook with a notch and having the “Show menu bar in non-native mode” option set. Changing the screen resolution while using non-native full screen also works properly now. <a href="https://github.com/macvim-dev/macvim/issues/1450">#1450</a></li>
  <li>Fixed Help menu’s documentation search not working with tags with special characters like <code>&lt;Down&gt;</code>. <a href="https://github.com/macvim-dev/macvim/issues/1455">#1455</a></li>
</ul>

<h1 id="r179-compatibility">Compatibility</h1>

<p>Requires macOS 10.9 or above. (10.9 - 10.12 requires downloading a separate legacy build)</p>

<p>Script interfaces have compatibility with these versions:</p>

<ul>
  <li>Lua 5.4</li>
  <li>Perl 5.30</li>
  <li>Python2 2.7</li>
  <li>Python3 3.9 or above</li>
  <li>Ruby 3.2</li>
</ul>
